from telegram import InlineKeyboardButton, InlineKeyboardMarkup
from utils.logger import setup_logger

logger = setup_logger("maintenance_commands", "logs/growbot.log")

def maintenance(update, context):
    """Handle maintenance requests."""
    logger.info(f"Received maintenance request from {update.effective_user.username}.")

    # Generate maintenance options
    maintenance_message = (
        "*Maintenance Options:*\n"
        "Choose an action below."
    )

    keyboard = [
        [InlineKeyboardButton("Run Diagnostics", callback_data="run_diagnostics")],
        [InlineKeyboardButton("Check Notifications", callback_data="check_notifications")],
        [InlineKeyboardButton("Back to Main Menu", callback_data="back_to_main")],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)

    update.message.reply_text(
        maintenance_message,
        reply_markup=reply_markup,
        parse_mode="Markdown",
    )
    logger.info("Maintenance options displayed.")
